{
    "station":
    {
        "location": "$station.location",
        "latitude": $station.stn_info.latitude_f,
        "longitude": $station.stn_info.longitude_f,
        "altitude_meters": $station.altitude.meter.raw,
        "link": "$station.station_url"
    },
    "generation":
    {
        #if $Extras.timestamp_fmt == "human"
        "time": "$current.dateTime.format('%a, %d %b %Y %H:%M:%S %Z')",
        #else
        "time": "$current.dateTime.format('%Y-%m-%dT%H:%M:%S%z')",
        #end if
        "generator": "weewx $station.version"
    },
    "lcd_datasheet":
    {
        "current":
        {
            #if $current.outTemp.has_data
            "outTemp": {"value": $current.outTemp.raw, "units": "$current.outTemp.format(' ').lstrip()"},
            #end if
            #if $current.outHumidity.has_data
            "outHumidity": {"value": $current.outHumidity.raw, "units": "$current.outHumidity.format(' ').lstrip()"},
            #end if
            #if $current.dewpoint.has_data
            "dewpoint": {"value": $current.dewpoint.raw, "units": "$current.dewpoint.format(' ').lstrip()"},
            #end if
            #if $current.windSpeed.has_data
            "wind_speed": {"value": $current.windSpeed.raw, "units": "$current.windSpeed.format(' ').lstrip()"},
            #end if
            #if $current.windchill.has_data
            "wind_chill": {"value": $current.windchill.raw, "units": "$current.windchill.format(' ').lstrip()"},
            #end if
            #if $current.barometer.has_data
            "barometer": {"value": $current.barometer.raw, "units": "$current.barometer.format(' ').lstrip()"},
            #end if
            #if $current.extraTemp1.has_data
            "extraTemp1": {"value": $current.extraTemp1.raw, "units": "$current.extraTemp1.format(' ').lstrip()"},
            #end if
            #if $current.extraTemp2.has_data
            "extraTemp2": {"value": $current.extraTemp2.raw, "units": "$current.extraTemp2.format(' ').lstrip()"},
            #end if
            #if $current.extraTemp3.has_data
            "extraTemp3": {"value": $current.extraTemp3.raw, "units": "$current.extraTemp3.format(' ').lstrip()"},
            #end if
            "void_end": null
        },
        "daily_captures":
        {
            "interval_minutes": 15,
            "fields": [
                "timestamp_epoch",
                "temperature",
                "wind_direction",
                "wind_speed",
                "wind_gust",
                "rain",
                "rain_rate",
                "humidity",
                "dewpoint",
                "wind_chill",
                "barometer"
            ],
            "rows":
            [
                #set $first = 1
                #for $row in $day.records
                #if not $first
                ,
                #end if
                [
                    $row.dateTime.raw,
                    $row.outTemp.raw,
                    $row.windDir.raw,
                    $row.windSpeed.raw,
                    $row.windGust.raw,
                    $row.rain.raw,
                    $row.rainRate.raw,
                    $row.outHumidity.raw,
                    $row.dewpoint.raw,
                    $row.windchill.raw,
                    $row.barometer.raw
                ]
                #set $first = 0
                #end for
            ]
        },
        "weekly_daily_summaries":
        [
            #set $first = 1
            #for $week_day in $week.days
            #if not $first
            ,
            #end if
            {
                "period_start_epoch": $week_day.start.raw,
                "period_end_epoch": $week_day.end.raw,
                "temperature": {
                    "min": $week_day.outTemp.min.raw,
                    "max": $week_day.outTemp.max.raw,
                    "avg": $week_day.outTemp.avg.raw
                },
                "humidity": {
                    "min": $week_day.outHumidity.min.raw,
                    "max": $week_day.outHumidity.max.raw,
                    "avg": $week_day.outHumidity.avg.raw
                },
                "dewpoint": {
                    "min": $week_day.dewpoint.min.raw,
                    "max": $week_day.dewpoint.max.raw,
                    "avg": $week_day.dewpoint.avg.raw
                },
                "wind_chill": {
                    "min": $week_day.windchill.min.raw,
                    "max": $week_day.windchill.max.raw,
                    "avg": $week_day.windchill.avg.raw
                },
                "wind": {
                    "speed_avg": $week_day.windSpeed.avg.raw,
                    "speed_max": $week_day.windSpeed.max.raw,
                    "gust_max": $week_day.windGust.max.raw
                },
                "barometer": {
                    "min": $week_day.barometer.min.raw,
                    "max": $week_day.barometer.max.raw,
                    "avg": $week_day.barometer.avg.raw
                },
                "rain": {
                    "total": $week_day.rain.sum.raw,
                    "rate_max": $week_day.rainRate.max.raw
                }
            }
            #set $first = 0
            #end for
        ],
        "monthly_daily_summaries":
        [
            #set $first = 1
            #for $month_day in $month.days
            #if not $first
            ,
            #end if
            {
                "period_start_epoch": $month_day.start.raw,
                "period_end_epoch": $month_day.end.raw,
                "temperature": {
                    "min": $month_day.outTemp.min.raw,
                    "max": $month_day.outTemp.max.raw,
                    "avg": $month_day.outTemp.avg.raw
                },
                "humidity": {
                    "min": $month_day.outHumidity.min.raw,
                    "max": $month_day.outHumidity.max.raw,
                    "avg": $month_day.outHumidity.avg.raw
                },
                "dewpoint": {
                    "min": $month_day.dewpoint.min.raw,
                    "max": $month_day.dewpoint.max.raw,
                    "avg": $month_day.dewpoint.avg.raw
                },
                "wind_chill": {
                    "min": $month_day.windchill.min.raw,
                    "max": $month_day.windchill.max.raw,
                    "avg": $month_day.windchill.avg.raw
                },
                "wind": {
                    "speed_avg": $month_day.windSpeed.avg.raw,
                    "speed_max": $month_day.windSpeed.max.raw,
                    "gust_max": $month_day.windGust.max.raw
                },
                "barometer": {
                    "min": $month_day.barometer.min.raw,
                    "max": $month_day.barometer.max.raw,
                    "avg": $month_day.barometer.avg.raw
                },
                "rain": {
                    "total": $month_day.rain.sum.raw,
                    "rate_max": $month_day.rainRate.max.raw
                }
            }
            #set $first = 0
            #end for
        ],
        "yearly_monthly_summaries":
        [
            #set $first = 1
            #for $year_month in $year.months
            #if not $first
            ,
            #end if
            {
                "period_start_epoch": $year_month.start.raw,
                "period_end_epoch": $year_month.end.raw,
                "temperature": {
                    "min": $year_month.outTemp.min.raw,
                    "max": $year_month.outTemp.max.raw,
                    "avg": $year_month.outTemp.avg.raw
                },
                "humidity": {
                    "min": $year_month.outHumidity.min.raw,
                    "max": $year_month.outHumidity.max.raw,
                    "avg": $year_month.outHumidity.avg.raw
                },
                "dewpoint": {
                    "min": $year_month.dewpoint.min.raw,
                    "max": $year_month.dewpoint.max.raw,
                    "avg": $year_month.dewpoint.avg.raw
                },
                "wind_chill": {
                    "min": $year_month.windchill.min.raw,
                    "max": $year_month.windchill.max.raw,
                    "avg": $year_month.windchill.avg.raw
                },
                "wind": {
                    "speed_avg": $year_month.windSpeed.avg.raw,
                    "speed_max": $year_month.windSpeed.max.raw,
                    "gust_max": $year_month.windGust.max.raw
                },
                "barometer": {
                    "min": $year_month.barometer.min.raw,
                    "max": $year_month.barometer.max.raw,
                    "avg": $year_month.barometer.avg.raw
                },
                "rain": {
                    "total": $year_month.rain.sum.raw,
                    "rate_max": $year_month.rainRate.max.raw
                }
            }
            #set $first = 0
            #end for
        ]
    }
}
